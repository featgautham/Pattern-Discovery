---
title: "Contiguous_Sequence_Mining"
author: "Gautham Meenakshisundaram"
date: "12/16/2019"
output: word_document
---

# Mining Contiguous Sequential Patterns in Text

## Data
The provided input file ("reviews_sample.txt") consists of 10,000 online reviews from Yelp users. The reviews have been stemmed (to remove the postfix of each word so words with similar semantics can have the same form), and most of the punctuation has been removed. Therefore, each line is basically a list of strings separated by spaces.

```{r}
filepath = "C:/my_repo/Data Science/44468423_RPL_Coursera_121219/Assignments/Pattern Discovery in Data Mining_Assignment2/reviews_sample.txt"
```

## Output
An algorithm is to be implemented to mine contiguous sequential patterns that are frequent in the input data. A contiguous sequential pattern is a sequence of items that frequently appears as a consecutive subsequence in a database of many sequences.

```{r}
library('CSeqpat')
```

Extract all the frequent contiguous sequential patterns that have an absolute support no smaller than 100.

```{r}
output <- CSeqpat(filepath, phraselenmin = 1, phraselenmax = 99999, minsupport = 100, "\n", stopword = FALSE, stemword = FALSE, lower = FALSE, removepunc = FALSE)

options(max.print = 3000)
output
```

Please write all the frequent contiguous sequential patterns along with their absolute supports into a text file named "patterns.txt". Every line corresponds to exactly one pattern you found and should be in this format: support:item_1;item_2;item_3

```{r}
install.packages('splitstackshape')
library(splitstackshape)
```

```{r}
df1 <- data.frame(output[1],output[2])
df1
```

```{r}
df2 <- cSplit(df1, 'Freq_Phrases', sep=" ")

df2$concat <- paste(df2$Support,":",df2$Freq_Phrases_1,";",df2$Freq_Phrases_2)

df2$concat <- gsub("; NA","", df2$concat)
df2$concat <- gsub(" ","", df2$concat)

df2
```

## Saving as text file
```{r}
writeLines(df2$concat,"patterns.txt")
```